<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADA Diabetes Management Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 20px;
        }
        
        h2 {
            color: #3498db;
            margin-top: 30px;
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .form-container {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        input[type="number"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            width: 200px;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        #results {
            margin-top: 30px;
            background: #f7fbff;
            padding: 20px;
            border-radius: 8px;
            border-left: 5px solid #3498db;
            display: none;
        }
        
        .result-section {
            margin-bottom: 25px;
        }
        
        .result-section h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 8px;
            margin-bottom: 15px;
        }
        
        ul {
            margin-top: 0;
            padding-left: 20px;
        }
        
        li {
            margin-bottom: 5px;
        }
        
        .normal {
            color: #27ae60;
            font-weight: bold;
        }
        
        .warning {
            color: #f39c12;
            font-weight: bold;
        }
        
        .danger {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .prediabetes {
            color: #d35400;
            font-weight: bold;
        }
        
        .diabetes {
            color: #c0392b;
            font-weight: bold;
        }
        
        .checkbox-group {
            margin-top: 10px;
        }
        
        .checkbox-label {
            font-weight: normal;
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .checkbox-label input {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <h1>ADA Diabetes Management Calculator</h1>
    
    <div class="form-container">
        <form id="diabetesForm">
            <h2>Patient Information</h2>
            <div class="form-group">
                <label for="age">Age (years):</label>
                <input type="number" id="age" name="age" min="18" max="120" required>
            </div>
            
            <div class="form-group">
                <label for="bmi">BMI (kg/m²):</label>
                <input type="number" id="bmi" name="bmi" min="10" max="80" step="0.1" required>
            </div>
            
            <h2>Laboratory Values</h2>
            <div class="form-group">
                <label for="a1c">HbA1c (%):</label>
                <input type="number" id="a1c" name="a1c" min="3" max="20" step="0.1" required>
            </div>
            
            <div class="form-group">
                <label for="fpg">Fasting Plasma Glucose (mg/dL):</label>
                <input type="number" id="fpg" name="fpg" min="50" max="500" required>
            </div>
            
            <div class="form-group">
                <label for="ogtt">2-hour Plasma Glucose during OGTT (mg/dL) (if available):</label>
                <input type="number" id="ogtt" name="ogtt" min="50" max="500">
            </div>
            
            <h2>Risk Factors & Comorbidities</h2>
            <div class="form-group">
                <label>Select all that apply:</label>
                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="hypertension"> Hypertension
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="dyslipidemia"> Dyslipidemia
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="cvd"> Established Cardiovascular Disease (ASCVD)
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="ckd"> Chronic Kidney Disease (CKD)
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="hf"> Heart Failure
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="family"> Family History of Diabetes
                    </label>
                </div>
            </div>
            
            <div class="form-group">
                <label for="eGFR">eGFR (mL/min/1.73m²) (if available):</label>
                <input type="number" id="eGFR" name="eGFR" min="0" max="150">
            </div>
            
            <div class="form-group">
                <label for="uacr">UACR (mg/g) (if available):</label>
                <input type="number" id="uacr" name="uacr" min="0" max="10000">
            </div>
            
            <h2>Current Medications</h2>
            <div class="form-group">
                <label>Select all that currently apply:</label>
                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="metformin"> Metformin
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="sglt2"> SGLT2 Inhibitor
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="glp1"> GLP-1 Receptor Agonist
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="dpp4"> DPP-4 Inhibitor
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="insulin"> Insulin
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="sulfonylurea"> Sulfonylurea
                    </label>
                </div>
            </div>
            
            <button type="button" onclick="generateRecommendation()">Generate Recommendation</button>
        </form>
    </div>
    
    <div id="results">
        <div class="result-section">
            <h3>Diagnosis:</h3>
            <p id="diagnosis"></p>
        </div>
        
        <div class="result-section">
            <h3>Glycemic Targets:</h3>
            <p id="glycemicTargets"></p>
        </div>
        
        <div class="result-section">
            <h3>Lifestyle Recommendations:</h3>
            <div id="lifestyle"></div>
        </div>
        
        <div class="result-section">
            <h3>Pharmacologic Recommendations:</h3>
            <div id="medications"></div>
        </div>
        
        <div class="result-section">
            <h3>Monitoring Recommendations:</h3>
            <div id="monitoring"></div>
        </div>
    </div>
    
    <script>
        function generateRecommendation() {
            // Get form values
            const age = parseInt(document.getElementById('age').value);
            const bmi = parseFloat(document.getElementById('bmi').value);
            const a1c = parseFloat(document.getElementById('a1c').value);
            const fpg = parseInt(document.getElementById('fpg').value);
            const ogtt = document.getElementById('ogtt').value ? parseInt(document.getElementById('ogtt').value) : null;
            const eGFR = document.getElementById('eGFR').value ? parseInt(document.getElementById('eGFR').value) : null;
            const uacr = document.getElementById('uacr').value ? parseInt(document.getElementById('uacr').value) : null;
            
            // Get checkboxes
            const hasHypertension = document.getElementById('hypertension').checked;
            const hasDyslipidemia = document.getElementById('dyslipidemia').checked;
            const hasCVD = document.getElementById('cvd').checked;
            const hasCKD = document.getElementById('ckd').checked;
            const hasHF = document.getElementById('hf').checked;
            const hasFamily = document.getElementById('family').checked;
            
            // Get current medications
            const onMetformin = document.getElementById('metformin').checked;
            const onSGLT2 = document.getElementById('sglt2').checked;
            const onGLP1 = document.getElementById('glp1').checked;
            const onDPP4 = document.getElementById('dpp4').checked;
            const onInsulin = document.getElementById('insulin').checked;
            const onSulfonylurea = document.getElementById('sulfonylurea').checked;
            
            // Validate required inputs
            if (!age || !bmi || !a1c || !fpg) {
                alert("Please fill in all required fields (Age, BMI, HbA1c, and Fasting Plasma Glucose)");
                return;
            }
            
            // Determine diagnosis
            let diagnosisText = "";
            let diagnosisClass = "";
            
            if (a1c >= 6.5 || fpg >= 126 || (ogtt && ogtt >= 200)) {
                diagnosisText = "Diabetes Mellitus";
                diagnosisClass = "diabetes";
            } else if ((a1c >= 5.7 && a1c < 6.5) || (fpg >= 100 && fpg < 126) || (ogtt && ogtt >= 140 && ogtt < 200)) {
                diagnosisText = "Prediabetes / High Risk for Diabetes";
                diagnosisClass = "prediabetes";
            } else {
                diagnosisText = "Normal glycemic status";
                diagnosisClass = "normal";
            }
            
            // Set diagnosis text with appropriate class
            document.getElementById('diagnosis').innerHTML = `<span class="${diagnosisClass}">${diagnosisText}</span>`;
            
            // Determine glycemic targets
            let glycemicTargets = "";
            
            if (diagnosisText.includes("Diabetes")) {
                if (age < 65 && !hasCVD && !hasCKD) {
                    glycemicTargets = "Target HbA1c: <7.0% (individualized based on patient factors)";
                } else if (age >= 65 || hasCVD || hasCKD || hasHF) {
                    glycemicTargets = "Target HbA1c: <8.0% (less stringent due to age or comorbidities)";
                }
            } else if (diagnosisText.includes("Prediabetes")) {
                glycemicTargets = "Goal: Prevent progression to diabetes. Target HbA1c: <5.7%";
            } else {
                glycemicTargets = "Maintain normal glycemic status. Routine screening recommended based on risk factors.";
            }
            
            document.getElementById('glycemicTargets').textContent = glycemicTargets;
            
            // Lifestyle recommendations
            let lifestyleHTML = "<ul>";
            
            if (diagnosisText.includes("Diabetes") || diagnosisText.includes("Prediabetes")) {
                lifestyleHTML += "<li>Medical nutrition therapy - consider referral to registered dietitian</li>";
                
                if (bmi >= 25) {
                    lifestyleHTML += "<li>Weight loss of 5-10% of body weight recommended</li>";
                }
                
                lifestyleHTML += "<li>Physical activity: 150 minutes/week of moderate-intensity exercise</li>";
                lifestyleHTML += "<li>Smoking cessation (if applicable)</li>";
                
                if (hasHypertension) {
                    lifestyleHTML += "<li>Reduce sodium intake to <2,300 mg/day</li>";
                }
                
                if (hasDyslipidemia) {
                    lifestyleHTML += "<li>Limit saturated fat to <10% of calories and avoid trans fats</li>";
                }
            } else {
                lifestyleHTML += "<li>Maintain healthy diet rich in fruits, vegetables, and whole grains</li>";
                lifestyleHTML += "<li>Regular physical activity (150 minutes/week)</li>";
                
                if (hasFamily || bmi >= 25) {
                    lifestyleHTML += "<li>Annual screening for diabetes recommended due to risk factors</li>";
                }
            }
            
            lifestyleHTML += "</ul>";
            document.getElementById('lifestyle').innerHTML = lifestyleHTML;
            
            // Pharmacologic recommendations
            let medicationsHTML = "<ul>";
            
            if (diagnosisText.includes("Diabetes")) {
                // First-line therapy
                if (!onMetformin) {
                    medicationsHTML += "<li><strong>First-line:</strong> Initiate metformin unless contraindicated</li>";
                }
                
                // ASCVD, CKD, or HF considerations
                if ((hasCVD || hasCKD || hasHF) && !onSGLT2 && !onGLP1) {
                    if (hasCVD) {
                        medicationsHTML += "<li><strong>For ASCVD:</strong> Add GLP-1 RA or SGLT2 inhibitor with demonstrated cardiovascular benefit</li>";
                    }
                    
                    if (hasCKD) {
                        if (eGFR && eGFR >= 30) {
                            medicationsHTML += "<li><strong>For CKD:</strong> Add SGLT2 inhibitor with demonstrated kidney benefit</li>";
                        } else {
                            medicationsHTML += "<li><strong>For CKD with eGFR <30:</strong> Consider GLP-1 RA with demonstrated kidney benefit</li>";
                        }
                    }
                    
                    if (hasHF) {
                        medicationsHTML += "<li><strong>For heart failure:</strong> Add SGLT2 inhibitor with demonstrated heart failure benefit</li>";
                    }
                }
                
                // Additional therapy based on A1c
                if (a1c >= 9.0 && !onInsulin) {
                    medicationsHTML += "<li><strong>For HbA1c ≥9.0%:</strong> Consider combination injectable therapy (basal insulin + GLP-1 RA) or multiple daily insulin injections</li>";
                } else if (a1c >= 8.0 && !(onSGLT2 || onGLP1 || onDPP4 || onSulfonylurea)) {
                    medicationsHTML += "<li><strong>For HbA1c ≥8.0%:</strong> Consider dual therapy (metformin + another agent)</li>";
                }
                
                // Cost considerations
                if (a1c >= 7.0 && !(onSGLT2 || onGLP1) && !hasCVD && !hasCKD && !hasHF) {
                    medicationsHTML += "<li>If cost is a major issue: Consider sulfonylurea or DPP-4 inhibitor as add-on to metformin</li>";
                }
                
                // Hypoglycemia risk warning if on insulin or sulfonylurea
                if (onInsulin || onSulfonylurea) {
                    medicationsHTML += "<li class='warning'>Note: Current medication regimen includes agents with hypoglycemia risk. Consider education on hypoglycemia recognition and management.</li>";
                }
            } else if (diagnosisText.includes("Prediabetes")) {
                if (bmi >= 35 || (bmi >= 30 && age < 60)) {
                    medicationsHTML += "<li>Consider metformin for prevention of Type 2 diabetes, especially for BMI ≥35 kg/m², those <60 years of age, or women with prior gestational diabetes</li>";
                } else {
                    medicationsHTML += "<li>Lifestyle modification is primary intervention for prediabetes</li>";
                }
            } else {
                medicationsHTML += "<li>No diabetes medications indicated</li>";
            }
            
            medicationsHTML += "</ul>";
            document.getElementById('medications').innerHTML = medicationsHTML;
            
            // Monitoring recommendations
            let monitoringHTML = "<ul>";
            
            if (diagnosisText.includes("Diabetes")) {
                monitoringHTML += "<li>HbA1c testing 2-4 times per year depending on stability</li>";
                
                if (onInsulin) {
                    monitoringHTML += "<li>Blood glucose self-monitoring multiple times daily</li>";
                } else {
                    monitoringHTML += "<li>Consider blood glucose self-monitoring to guide therapy adjustments</li>";
                }
                
                monitoringHTML += "<li>Annual comprehensive eye exam</li>";
                monitoringHTML += "<li>Annual comprehensive foot exam</li>";
                monitoringHTML += "<li>Annual screening for albuminuria</li>";
                monitoringHTML += "<li>Lipid profile and cardiovascular risk assessment</li>";
                
                if (hasHypertension) {
                    monitoringHTML += "<li>Blood pressure monitoring at each clinical visit</li>";
                }
                
                if (hasCKD) {
                    monitoringHTML += "<li>More frequent monitoring of kidney function (eGFR, UACR)</li>";
                }
            } else if (diagnosisText.includes("Prediabetes")) {
                monitoringHTML += "<li>Annual HbA1c or fasting glucose testing</li>";
                monitoringHTML += "<li>Annual assessment of cardiovascular risk factors</li>";
            } else {
                if (hasFamily || bmi >= 25) {
                    monitoringHTML += "<li>Diabetes screening every 3 years due to risk factors</li>";
                } else {
                    monitoringHTML += "<li>Diabetes screening starting at age 35, repeated every 3 years</li>";
                }
            }
            
            monitoringHTML += "</ul>";
            document.getElementById('monitoring').innerHTML = monitoringHTML;
            
            // Display results
            document.getElementById('results').style.display = 'block';
        }
    </script>
</body>
</html>
